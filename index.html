<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Insurance Cross-Selling Prediction</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.18.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.5.1"></script>
    <style>
        :root {
            --primary: #007bff;
            --secondary: #6c757d;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --light: #f8f9fa;
            --dark: #343a40;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .mode-selector {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .mode-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: white;
        }
        
        .mode-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        
        .mode-indicator {
            font-size: 1.1rem;
            font-weight: 600;
            padding: 10px 20px;
            background: white;
            border-radius: 25px;
            display: inline-block;
            margin-top: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 10px;
            display: inline-block;
        }
        
        .card h3 {
            color: #34495e;
            margin: 20px 0 15px 0;
            font-size: 1.4rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select, button {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        button {
            background: linear-gradient(135deg, var(--primary) 0%, #0056b3 100%);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 123, 255, 0.4);
        }
        
        button:disabled {
            background: var(--secondary);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #1e7e34 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #e0a800 100%);
            color: #212529;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger) 0%, #c82333 100%);
        }
        
        .grid-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }
        
        .status-box {
            background: #f8f9fa;
            border-left: 4px solid var(--primary);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .status-box.success {
            border-left-color: var(--success);
            background: #d4edda;
        }
        
        .status-box.error {
            border-left-color: var(--danger);
            background: #f8d7da;
        }
        
        .status-box.warning {
            border-left-color: var(--warning);
            background: #fff3cd;
        }
        
        .model-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            font-weight: 600;
            z-index: 1000;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
        }
        
        .feature-item h4 {
            margin-bottom: 10px;
            color: #495057;
        }
        
        .feature-item .value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .prediction-high {
            background: #d4edda !important;
            color: #155724;
            font-weight: 600;
        }
        
        .prediction-low {
            background: #f8d7da !important;
            color: #721c24;
        }
        
        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .mode-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .mode-btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header">
            <h1>üöó Vehicle Insurance Cross-Selling Predictor</h1>
            <p>AI-powered solution to identify customers interested in vehicle insurance</p>
            
            <div class="mode-selector">
                <button id="ml-mode-btn" class="mode-btn" onclick="switchMode('training')">
                    üî¨ ML Specialist Mode
                </button>
                <button id="business-mode-btn" class="mode-btn" onclick="switchMode('prediction')">
                    üíº Business User Mode
                </button>
            </div>
            
            <div class="mode-indicator" id="mode-indicator">
                Current Mode: ML Specialist
            </div>
        </div>

        <!-- Model Status Indicator -->
        <div class="model-status" id="model-status">
            üî¥ No Model Available - Train First
        </div>

        <!-- ML SPECIALIST MODE SECTIONS -->
        
        <!-- Data Upload Section -->
        <div id="data-upload-section" class="card">
            <h2>üìÅ Data Upload & Configuration</h2>
            <div class="grid-2">
                <div class="form-group">
                    <label for="train-file">Training Data (CSV)</label>
                    <input type="file" id="train-file" accept=".csv">
                    <small>Upload training dataset with customer features and response</small>
                </div>
                <div class="form-group">
                    <label for="test-file">Test Data (CSV)</label>
                    <input type="file" id="test-file" accept=".csv">
                    <small>Upload test dataset for predictions</small>
                </div>
            </div>
            <button onclick="loadData()">Load Datasets</button>
            <div id="data-status" class="status-box">
                No data loaded. Please upload training and test CSV files.
            </div>
        </div>

        <!-- Data Exploration Section -->
        <div id="data-exploration-section" class="card">
            <h2>üîç Data Exploration & Analysis</h2>
            <button id="inspect-btn" onclick="inspectData()" disabled>Inspect Data</button>
            
            <div id="data-preview" style="margin-top: 20px;"></div>
            <div id="data-stats" style="margin-top: 20px;"></div>
            <div id="charts" style="margin-top: 20px;"></div>
        </div>

        <!-- Data Preprocessing Section -->
        <div id="data-preprocessing-section" class="card">
            <h2>‚öôÔ∏è Data Preprocessing</h2>
            <p>Automated preprocessing including imputation, normalization, and feature engineering</p>
            <button id="preprocess-btn" onclick="preprocessData()" disabled>Preprocess Data</button>
            <div id="preprocessing-output" class="status-box">
                Preprocessing not started.
            </div>
        </div>

        <!-- Model Configuration Section -->
        <div id="model-config-section" class="card">
            <h2>üß† Model Configuration</h2>
            <div class="form-group">
                <label for="epochs">Training Epochs</label>
                <input type="number" id="epochs" value="50" min="10" max="200">
            </div>
            <button id="create-model-btn" onclick="createModel()" disabled>Create Neural Network Model</button>
            <div id="model-summary" style="margin-top: 20px;"></div>
        </div>

        <!-- Model Training Section -->
        <div id="model-training-section" class="card">
            <h2>üöÄ Model Training</h2>
            <button id="train-btn" onclick="trainModel()" disabled>Start Training</button>
            <div id="training-status" class="status-box">
                Training not started.
            </div>
        </div>

        <!-- Model Evaluation Section -->
        <div id="model-evaluation-section" class="card">
            <h2>üìä Model Evaluation</h2>
            <button id="evaluate-btn" onclick="evaluateModel()" disabled>Evaluate Model</button>
            <div id="evaluation-results" style="margin-top: 20px;"></div>
        </div>

        <!-- Prediction Section -->
        <div id="prediction-section" class="card">
            <h2>üîÆ Make Predictions</h2>
            <button id="predict-btn" onclick="makePredictions()" disabled>Predict on Test Data</button>
            <div id="prediction-results" style="margin-top: 20px;"></div>
        </div>

        <!-- Export Section -->
        <div id="export-section" class="card">
            <h2>üíæ Export Results</h2>
            <button id="export-btn" onclick="exportResults()" disabled>Export Predictions to CSV</button>
        </div>

        <!-- BUSINESS USER MODE SECTIONS -->
        
        <!-- Business Data Upload Section -->
        <div id="business-data-upload-section" class="card" style="display: none;">
            <h2>üìä Business Data Upload</h2>
            <div class="form-group">
                <label for="business-test-file">Customer Data for Analysis (CSV)</label>
                <input type="file" id="business-test-file" accept=".csv">
                <small>Upload customer dataset for business analysis and predictions</small>
            </div>
            <button onclick="loadBusinessData()">Load Customer Data</button>
            <div id="business-data-status" class="status-box">
                No customer data loaded.
            </div>
        </div>

        <!-- Business Insights Section -->
        <div id="business-insights-section" class="card" style="display: none;">
            <h2>üìà Business Insights & Customer Analysis</h2>
            <div id="business-insights-content">
                <p>Load customer data to see detailed business insights and analysis.</p>
            </div>
            <div id="business-charts" style="margin-top: 20px;"></div>
        </div>

        <!-- Business Prediction Section -->
        <div id="business-prediction-section" class="card" style="display: none;">
            <h2>üéØ Bulk Customer Predictions</h2>
            <button id="business-predict-btn" onclick="makeBusinessPredictions()" disabled>Generate Business Predictions</button>
            <div id="business-prediction-results" style="margin-top: 20px;"></div>
        </div>

        <!-- Single Customer Prediction Section -->
        <div id="single-prediction-section" class="card" style="display: none;">
            <h2>üë§ Single Customer Prediction</h2>
            <p>Enter customer details to predict vehicle insurance interest</p>
            
            <div class="grid-3">
                <div class="form-group">
                    <label for="age">Age *</label>
                    <input type="number" id="age" placeholder="Enter age" min="18" max="100">
                </div>
                
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender">
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="driving-license">Driving License</label>
                    <select id="driving-license">
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="region-code">Region Code</label>
                    <input type="number" id="region-code" placeholder="e.g., 28" min="0" max="50">
                </div>
                
                <div class="form-group">
                    <label for="previously-insured">Previously Insured</label>
                    <select id="previously-insured">
                        <option value="1">Yes</option>
                        <option value="0">No</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="vehicle-age">Vehicle Age</label>
                    <select id="vehicle-age">
                        <option value="< 1 Year">&lt; 1 Year</option>
                        <option value="1-2 Year">1-2 Year</option>
                        <option value="> 2 Years">&gt; 2 Years</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="vehicle-damage">Vehicle Damage History</label>
                    <select id="vehicle-damage">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="annual-premium">Annual Premium (‚Çπ) *</label>
                    <input type="number" id="annual-premium" placeholder="e.g., 35000" min="0">
                </div>
                
                <div class="form-group">
                    <label for="policy-channel">Policy Sales Channel</label>
                    <input type="number" id="policy-channel" placeholder="e.g., 26" min="0" max="200">
                </div>
                
                <div class="form-group">
                    <label for="vintage">Vintage (Days)</label>
                    <input type="number" id="vintage" placeholder="e.g., 150" min="0" max="365">
                </div>
            </div>
            
            <button onclick="makeSinglePrediction()" class="btn-success">Predict Customer Interest</button>
            
            <div id="single-prediction-result" style="margin-top: 20px;"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>